---
title: Porter Buildtime Architecture
description: Understanding Porter's Buildtime Architecture
---

In Porter, "buildtime" refers to authoring and building a bundle.
A bundle is defined by a [manifest], porter.yaml, where you define:

* [Parameters] to customize the bundle.
* [Credentials] to authenticate to services and resources used by the bundle.
* [Outputs] generated by the bundle.
* [Mixins] used by the bundle. Mixins help you install and interact with tools in the bundle. 
* [Actions] such as install, upgrade or uninstall. These contain the steps to execute when that bundle action is run.

Mixins must be installed to the same machine where the bundle is built.
So for example, if you want to use the kubernetes mixin in your bundle, first run `porter mixins install kubernetes`.
Mixins are cached in your PORTER_HOME directory, and the kubernetes mixin can be found in ~/.porter/mixins/kubernetes after it is installed.
Porter does not support specifying which version of a mixin to use in a bundle yet.
You can follow the [Mixins are Bundles proposal](https://github.com/getporter/proposals/blob/main/pep/005-mixins-are-bundles.md) to keep track of that feature's progress.

When the bundle author runs `porter build`, Porter first generates a Dockerfile to create an image for the bundle (known as the bundle image or installer).
You can define your own [custom Dockerfile](/docs/bundle/custom-dockerfile/) to customize and optimize the image.

Porter uses the generated `.cnab` directory as the Docker build context, which contains the Porter runtime, mixin runtimes, and the canonical porter.yaml.
Your bundle's source files (scripts, configs, etc.) are made available through a named build context called `userfiles`.
The generated Dockerfile includes:
- A base image (debian:stable-slim)
- Additional customizations generated by the mixins
- A COPY statement to include user files from the `userfiles` context into the bundle directory
- A COPY statement to include the `.cnab` contents (runtimes and porter.yaml) into the image

This build structure minimizes image size by avoiding duplicate layers and efficiently organizing bundle contents.
After the image is built, Porter generates a CNAB-compliant bundle.json file that defines the bundle's metadata.

# See Also

* [Create a bundle](/docs/getting-started/create-bundle/)
* [Use a custom Dockerfile](/docs/bundle/custom-dockerfile/)
* [Mixin Architecture](/docs/how-to-guides/work-with-mixins/)
* [Distribute a bundle](/distributing-bundles/)
* [Porter Runtime](/architecture-runtime/)

[manifest]: /docs/bundle/manifest/
[Parameters]: /docs/introduction/concepts-and-components/intro-parameters/
[Credentials]: /docs/introduction/concepts-and-components/intro-credentials/
[Outputs]: /docs/bundle/manifest/#outputs
[Mixins]: /mixins/
[Actions]: /docs/bundle/manifest/#bundle-actions
